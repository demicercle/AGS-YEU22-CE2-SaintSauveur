// new module script

struct CreditPage {
  int LineCount;
  int Graphic;
  int LinesColor[10];
  String Lines[10];
  
  import function AddLine(int color, String text);
};

function CreditPage::AddLine(int color, String text)
{
  this.LinesColor[this.LineCount] = color;
  this.Lines[this.LineCount] = text;
  this.LineCount++;
}

int lineCount = 10;
int margin = 10;
int fontHeight = 18;
int page = -1;
int screenW = 320;
int screenH = 200;
int fadeIn = 0;
bool clicked = false;
bool showCredits = false;

int pageTimer = 0;
int pageCount = 4;
CreditPage pages[4];

  int WHITE = 65535;
  int GREEN = 2;
  int ARTSCIENCE = 101;
  
function game_start()
{
  // DISPARITION À SAINT-SAUVEUR
  pages[0].AddLine(GREEN, "Réalisé par les élèves de CE2");
  pages[0].AddLine(GREEN, "des écoles du Ponant :");
  pages[0].AddLine(WHITE, "Robin Doucerain");
  pages[0].AddLine(WHITE, "Lucien Naud");
  pages[0].AddLine(WHITE, "Mayron Caillère");
  pages[0].AddLine(WHITE, "Lovan Rafin");
  pages[0].AddLine(WHITE, "Noa Guérineau");
  pages[0].AddLine(WHITE, "");
  pages[0].AddLine(WHITE, "");
  pages[0].AddLine(WHITE, "");
  
  pages[1].AddLine(GREEN, "Un projet ART SCIENCE 21");
  pages[1].AddLine(GREEN, "imaginé et supervisé par :");
  pages[1].AddLine(WHITE, "");
  pages[1].AddLine(WHITE, "Patricia Ruscito");
  pages[1].AddLine(WHITE, "Pierre Estève");
  pages[1].AddLine(WHITE, "Pierre Gaudillere");
  pages[1].AddLine(WHITE, "");
  pages[1].AddLine(WHITE, "");
  pages[1].AddLine(WHITE, "");
  pages[1].AddLine(WHITE, "Dans le cadre du CLEA Île d'Yeu 2022");
  
  pages[2].Graphic = ARTSCIENCE;
  
  pages[3].AddLine(WHITE, "");
  pages[3].AddLine(WHITE, "");
  pages[3].AddLine(WHITE, "");
  pages[3].AddLine(WHITE, "");
  pages[3].AddLine(WHITE, "");
  pages[3].AddLine(WHITE, "");
  pages[3].AddLine(WHITE, "");
  pages[3].AddLine(WHITE, "");
  pages[3].AddLine(GREEN, "www.artscience21.org");
  pages[3].AddLine(WHITE, "contact@artscience21.org");
}



function NextPage()
{
  page += 1;
  pageTimer = 0;
  
  if(page >= pageCount)
  {
    FadeOut(1);
    QuitGame(0);
    return;
  }
  else if (page == 0)
  {
    
  }
  else
  {
    FadeOut(fadeIn);
  }
  
  Mouse.Visible = false;
  gCredits.Visible = true;
  gCredits.Clickable = false;
  gCredits.BackgroundGraphic = pages[page].Graphic;
  
  Label* labels[] = new Label[10];
  labels[0] = CreditLine0;
  labels[1] = CreditLine1;
  labels[2] = CreditLine2;
  labels[3] = CreditLine3;
  labels[4] = CreditLine4;
  labels[5] = CreditLine5;
  labels[6] = CreditLine6;
  labels[7] = CreditLine7;
  labels[8] = CreditLine8;
  labels[9] = CreditLine9;
  
  for(int i = 0; i < 10; i++)
  {
    labels[i].Clickable = false;
    
    if(pages[page].Lines[i] != null)
    {
      labels[i].Visible = true;
      labels[i].Text = pages[page].Lines[i];
      labels[i].TextColor = pages[page].LinesColor[i];
    }
    else
    {
      labels[i].Visible = false;
    }
  }
  
  FadeIn(fadeIn);
}

function ShowCredits(int f)
{
  if(showCredits) return;
  showCredits = true;
  PauseGame();
  page = -1;
  fadeIn = f;
  NextPage();
}

function repeatedly_execute()
{
  if(showCredits)
  {
    if(page + 1 < pageCount)
    {
      pageTimer++;
    }
    else
    {
      pageTimer = 0;
    }
    
    if(pageTimer >= 200)
    {
      NextPage();
    }
  }
}

function on_mouse_click(MouseButton button)
{
  if(showCredits && button == eMouseLeft)
  {
    NextPage();
  }
}